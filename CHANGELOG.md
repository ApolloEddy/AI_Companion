# AI Companion 更新日志

## [v2.2.2] - 2025-12-26
### 🎨 UI/UX 进化 (Neural HUD)
- **全新侧边栏**：实现 `ModernSideBar` 玻璃拟态控制台。
- **实时监测**：新增情绪波形图（Emotion Waveform）及亲密度实时进度条。
- **人格实验室**：新增 **庄重度 (Formality)** 与 **幽默感 (Humor)** 实时调节滑块，动态改变 AI 语气。
- **交互透明化**：支持长按气泡查看完整生成 Prompt 与 Token Usage 统计。

### 🧠 逻辑精算 (Metamorphosis)
- **表达约束**：新增“角色扮演稀缺性”约束，显著降低 AI 在日常对话中对括号动作描写的过度依赖。
- **事实提取强化**：修复 `FactStore` 在多主语情况下的混淆问题，当前完全聚焦于提取用户事实。
- **参数关联**：滑块参数实时注入 `PersonaPolicy`，实现“设置即表现”。

---

## [v2.2.0] - 2025-12-26
### 🛠️ 核心架构重构 (Memory System v2)
- **对象化存储**：弃用文本列表，升级为包含时间戳与重要性权重的 `MemoryEntry` 对象存储。
- **零成本迁移**：实现旧版数据至 V2 格式的自动解析与元数据补全。
- **智能衰减**：引入 `memoryDecayDays` 参数驱动的加权相关性检索模型。
- **稳定性增强**：修复了 Windows 桌面端键盘断言错误及 JSON 解析边界崩溃问题。

---

## [v2.0.0] - 2025-12-25
### 🚀 认知引擎初版
- **用户画像**：建立 `ProfileService` 基础数据结构。
- **异步反思**：引入基础的反思机制以提取长期记忆。
- **行为边界**：加入 ProhibitedPatterns 过滤机制，减少说教感。

---

## [v1.x] - 早期版本
- 基础对话及 2D 情绪模型。
- 界面风格体系建立。
- 基础的主动消息逻辑（启动触发）。

